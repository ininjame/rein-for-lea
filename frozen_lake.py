
state_space = [[0],[1],[2],[3],
               [4],[5],[6],[7],
               [8],[9],[10],[11],
               [12],[13],[14],[15]]

state_space_2 = [[x] for x in range(0,16)]

action_space = {
    0: {0:{0:0.7, 1:0.3}, 0:{0:0.7, 4:0.3}, 1:{1:0.4, 0:0.3, 4:0.3}, 4: {4:0.4, 0:0.3, 1:0.3}},
    1: {1:{1:0.4, 0:0.3, 2:0.3}, 0:{0:0.4, 5:0.3, 1:0.3}, 5:{0:0.3, 5:0.4, 2:0.3}, 2:{1:0.3, 5:0.3, 2:0.4}},
    2: {2:{2:0.4, 1:0.3, 3:0.3}, 1:{1:0.4, 6:0.3, 2:0.3}, 6:{1:0.3, 6:0.4, 3:0.3}, 3:{2:0.3, 6:0.3, 3:0.4} },
    3: {3:{3:0.7, 2:0.3}, 2:{2:0.4, 3:0.3, 7:0.3}, 7:{2:0.3, 7:0.4, 3:0.3}, 3:{3:0.7, 7:0.3}},
    4: {0:{0:0.4, 5:0.3, 4:0.3}, 4:{4:0.4, 0:0.3, 8:0.3}, 5:{0:0.3, 5:0.4, 8:0.3}, 8:{4:0.3, 5:0.3, 8:0.4}},
    5: {5:{5:1}, 5:{5:1}, 5:{5:1}, 5:{5:1}},
    6: {2:{2:0.4, 5:0.3, 7:0.3}, 5:{2:0.3, 5:0.4, 10:0.3}, 10:{5:0.3, 10:0.4, 7:0.3}, 7:{2:0.3, 10:0.3, 7:0.4}},
    7: {7:{7:1}, 7:{7:1}, 7:{7:1}, 7:{7:1}},
    8: {4:{4:0.4, 9:0.3, 8:0.3}, 8:{8:0.4, 4:0.3, 12:0.3}, 9:{4:0.3, 9:0.4, 12:0.3}, 12:{8:0.3, 9:0.3, 12:0.4}},
    9: {5:{5:0.4, 8:0.3, 10:0.3}, 8:{5:0.3, 8:0.4, 13:0.3}, 13:{8:0.3, 13:0.4, 10:0.3}, 10:{5:0.3, 13:0.3, 10:0.4}},
    10: {6:{6:0.4, 9:0.3, 11:0.3}, 9:{6:0.3, 9:0.4, 14:0.3}, 14:{9:0.3, 14:0.4, 11:0.3}, 11:{6:0.3, 14:0.3, 11:0.4}},
    11: {11:{11:1}, 11:{11:1}, 11:{11:1}, 11:{11:1}},
    12: {12:{12:1}, 12:{12:1}, 12:{12:1}, 12:{12:1}},
    13: {9:{9:0.4, 12:0.3, 14:0.3}, 12:{9:0.3, 12:0.4, 13:0.3}, 13:{13:0.4, 12:0.3, 14:0.3}, 14:{9:0.3, 13:0.3, 14:0.4}},
    14: {10:{10:0.4, 13:0.3, 15:0.3}, 13:{10:0.3, 13:0.4, 14:0.3}, 14:{14:0.4, 13:0.3, 15:0.3}, 15:{10:0.3, 14:0.3, 15:0.4}},
    15: {15:{15:1}, 15:{15:1}, 15:{15:1}, 15:{15:1}}
}

action_space_new = {}
for i in range(0,16):
    action_space_new[i] = {j:{l:0 for l in range(0,16)} for j in range(0,4)}
    possible_actions = list(action_space[i].keys())
    for ind, k in enumerate(possible_actions):
        for a in action_space[i][k].keys():
            # print(k,a)
            action_space_new[i][ind][a] = action_space[i][k][a]

# action_labels = {0:"up", 1:"left", 2:"down", 3:"right"}
actions = {"up":0, "left":1, "down":2, "right":3}

def transition(current_state, action, next_state):
    prob = action_space_new[current_state][actions[action]][next_state]
    return prob

print(transition(6,"up", 7))
# print(action_space_new[1][3])

def reward(current_state, action):
    goal_prob = transition(current_state, action, 15)
    if goal_prob >0:
        return 1
    else:
        return 0
